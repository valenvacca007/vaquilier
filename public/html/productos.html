<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Productos â€¢ Vaquilier</title>
  <link rel="stylesheet" href="../css/styles.css">
</head>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const botones = document.querySelectorAll("button");

  botones.forEach(boton => {
    boton.addEventListener("click", (e) => {
      const card = e.target.closest(".productoItem, .tarotItem");
      if (!card) return;

      const nombre = card.querySelector("h4")?.textContent || "Producto sin nombre";
      const precioTexto = card.querySelector(".precio")?.textContent || "$0";
      const precio = parseInt(precioTexto.replace("$", "").replace(".", "").trim()) || 0;

      let carrito = JSON.parse(localStorage.getItem("carrito")) || [];

      const existente = carrito.find(p => p.nombre === nombre);
      if (existente) {
        existente.cantidad += 1;
      } else {
        carrito.push({ nombre, precio, cantidad: 1 });
      }

      localStorage.setItem("carrito", JSON.stringify(carrito));
      function actualizarMiniCarrito() {
  const lista = document.getElementById("miniListaCarrito");
  lista.innerHTML = "";
  let total = 0;
  carrito.forEach(item => {
    const li = document.createElement("li");
    li.textContent = `${item.nombre} x${item.cantidad} - $${item.precio * item.cantidad}`;
    lista.appendChild(li);
    total += item.precio * item.cantidad;
  });
  document.getElementById("miniTotal").textContent = total;
  document.getElementById("miniCarrito").style.display = carrito.length ? "block" : "none";
}
actualizarMiniCarrito();


      // AnimaciÃ³n visual para confirmar
      const aviso = document.createElement("div");
      aviso.textContent = "âœ¨ Agregado al carrito";
      aviso.className = "mensajeCarrito";
      document.body.appendChild(aviso);
      setTimeout(() => aviso.remove(), 1800);
    });
  });
});
</script>

<body>
  <header>
    <h1>Vaquilier</h1>
    <nav>
      <a href="index.html">Inicio</a>
      <a href="productos.html" class="activo">Productos</a>
      <a href="tarot.html">Tiradas</a>
      <a href="contacto.html">Contacto</a>
      <a href="carrito.html"> ComprarðŸ›’</a>
    </nav>
  </header>

  <section id="productos">
    <div class="productosHeader">
      <h2>Productos Artesanales ðŸŒ¿</h2>
      <p>Hechos con amor, intenciÃ³n y magia natural.</p>
    </div>

    <div class="productosGrid">
      <div class="productoItem">
        <img src="https://images.unsplash.com/photo-1589983846997-971c7b23a49c" alt="Vela de Lavanda">
        <h4>Vela de Lavanda</h4>
        <p>Relaja, limpia y protege el ambiente.</p>
        <p class="precio">$3.200</p>
         <div id="productoDetalle" class="producto-detalle">
    </div>
    
        <button>Agregar al carrito ðŸ›’</button>
      </div>

      <div class="productoItem">
        <img src="https://images.unsplash.com/photo-1602872029777-4c7e8a69d73a" alt="Sahumerios Naturales">
        <h4>Sahumerios Naturales</h4>
        <p>Hechos a mano con hierbas sagradas y resinas puras.</p>
        <p class="precio">$2.800</p>
        <button>Agregar al carrito ðŸ›’</button>
      </div>

      <div class="productoItem">
        <img src="https://images.unsplash.com/photo-1600486913747-55e5470d6f40" alt="Aceite Ritual">
        <h4>Aceite Ritual</h4>
        <p>Activa la energÃ­a y la intenciÃ³n de tus rituales.</p>
        <p class="precio">$4.500</p>
        <button>Agregar al carrito ðŸ›’</button>
      </div>
    </div>
  </section>
<!-- Mini Carrito Emoji -->
<div id="miniCarrito" class="mini-carrito-emoji">
  <span class="emoji-carrito" title="Ver carrito">ðŸ›’</span>
  <div class="carrito-desplegable">
    <h4>Tu carrito</h4>
    <ul id="miniListaCarrito"></ul>
    <p>Total: $<span id="miniTotal">0</span></p>
    <a href="carrito.html" class="btn">Ir al carrito</a>
  </div>
</div>
<script src="js/carrito.js"></script>
<script src="main.js"></script>
  <footer>
    <p>Â© 2025 Vaquilier â€¢ Creaciones con propÃ³sito y energÃ­a âœ¨</p>
  </footer>
</body>
